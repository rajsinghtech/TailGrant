temporal:
  address: "ottawa-temporal.keiretsu.ts.net:7233"
  useTsnet: true
  namespace: "default"
  taskQueue: "tailgrant"

tailscale:
  hostname: "tailgrant-server"
  stateDir: "/var/lib/tailgrant/tsnet"
  tailnet: "keiretsu.ts.net"

server:
  listenAddr: ":80"
  useTLS: false
  tags:
    - "tag:k8s"
  service:
    name: "svc:tailgrant"
    port: 80
    https: false
    comment: "TailGrant JIT access"
    tags:
      - "tag:k8s"

worker:
  ephemeral: true
  tags:
    - "tag:k8s"

grants:
  - name: "ssh-access"
    description: "Temporary SSH access to a target node"
    tags:
      - "tag:ssh-granted"
    postureAttributes:
      - key: "custom:jit-ssh"
        value: "granted"
        target: "requester"
    maxDuration: "4h"
    riskLevel: "low"
    approvers: []

  - name: "admin-access"
    description: "Full administrative access to a target node"
    tags:
      - "tag:admin-granted"
    postureAttributes:
      - key: "custom:jit-admin"
        value: "granted"
        target: "requester"
    maxDuration: "2h"
    riskLevel: "high"
    approvers:
      - "rajsinghtech@github"
      - "kbpersonal@github"

  - name: "debug-access"
    description: "Debug-level access for troubleshooting"
    tags:
      - "tag:debug-granted"
    postureAttributes:
      - key: "custom:jit-debug"
        value: "granted"
        target: "requester"
    maxDuration: "1h"
    riskLevel: "medium"
    approvers:
      - "rajsinghtech@github"
      - "kbpersonal@github"

  - name: "temp-admin"
    description: "Temporarily elevate user to admin role"
    action: "user_role"
    userAction:
      role: "admin"
    maxDuration: "2h"
    riskLevel: "high"
    approvers:
      - "rajsinghtech@github"
      - "kbpersonal@github"

  - name: "temp-restore"
    description: "Temporarily restore a suspended user"
    action: "user_restore"
    maxDuration: "4h"
    riskLevel: "medium"
    approvers:
      - "rajsinghtech@github"
      - "kbpersonal@github"
